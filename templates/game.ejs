<!DOCTYPE html>
{% load static %}
<html lang="ru">
    <head>    
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <link rel="stylesheet" href="static/games.css">
        <!-- <script src="{% static 'modal.js' %}"></script> -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
        <title> PArt</title>
    </head>
    <body oncontextmenu="return false">
        <!-- ----------------MODAL-COLOR-------------------- -->
        <!-- Триггер/Открыть модальный -->
        <p class="menuDraw">
            <button id="back" onclick="window.location.href='/'">На главную</button>
            <button id="myBtn">Выбрать цвет</button>
            <button id="save" onclick="downloadimage()">Сохранить</button>
            <button id="back" onclick="window.location.href='/addArt'">НОпубликовать</button>
        </p>

        <!-- Модальный -->
        <div id="myModal" class="modal1">
            <div id="mydiv">
                <div id="mydivheader">        
                    <span class="cloze">&times;</span>
                </div>
                <p style="width: 100%; height: 60%; padding-top: 10%;"><input type="color" id="color" style="cursor: pointer; width: 100%; height: 100%;"></p>
            </div>
        </div>
        <script src="https://html2canvas.hertzen.com/dist/html2canvas.js"></script>
        <script>
            const back=document.getElementById('back');
            const border=document.getElementById('hiden');
            const save=document.getElementById('save')
            let reader= new FileReader()
            let tab=document.createElement('div');
            for(let j=0;j<990;j++){
                let td=document.createElement('canvas');
                td.style="border: 0.01vw solid #000000"
                td.style="border: 1px solid; width:3vw; height:3vw; margin:none"
                tab.appendChild(td);
                td.addEventListener("mousedown", (e)=>{
                    if (e.bubtton!==2){
                        // td.style.color=document.getElementById("color").value;
                        td.style.backgroundColor=document.getElementById("color").value;
                        td.style.borderColor=document.getElementById("color").value;
                    }
                        if (e.button===2){
                        td.style.backgroundColor="#FFFFFF"
                        td.style.borderColor="#000000"
                    }
                })
            }
            tab.style="width:99.5vw; height:100%; display:flex; flex-flow: row wrap; align-content:start;"
            // for (let i=0; i<50;i++){
            //     let tr=document.createElement('tr');
            //     for(let j=0;j<50;j++){
            //         let td=document.createElement('td');
            //         td.style="border: 0.01vw solid #000000"
            //         td.style.width="3vw"
            //         td.style.height="1.8vw"
            //         tr.appendChild(td);
            //         td.addEventListener("mousedown", (e)=>{
            //             if (e.bubtton!==2){
            //                 td.style.color=document.getElementById("color").value;
            //                 td.style.backgroundColor=document.getElementById("color").value;}
            //             if (e.button===2){
            //                 td.style.backgroundColor="#FFFFFF"
            //             }
            //         })
            //     }
                
            //     tab.append(tr);
            // }
            // tab.style="border-spacing: 0px 0px"
            document.body.append(tab)
            function downloadimage(){
                var container=tab;
                html2canvas(container, { allowTaint: true }).then(function (canvas) {
                    var link = document.createElement("a");
                    document.body.appendChild(link);
                    link.download = "html_image.jpg";
                    link.href = canvas.toDataURL();
                    link.target = '_blank';
                    link.click();
                });
            }
        </script>
        <script src="{% static 'modal.js' %}"></script>
    </body>
</html>